# Fluent Learner v2 UX Redesign

> 日期: 2026-01-06
> 状态: 设计完成，待实现

## 设计背景

### 用户画像
- 使用场景：混合使用（主动学习 + 沉浸观看 + 碎片复习）
- 学习节奏：完全自由，不希望被打断

### 核心痛点
1. 视频与字幕区割裂，需要频繁切换视线
2. AI 功能藏在 Tab 里，不易发现
3. 复习入口不明显，需要切换页面

---

## Part 1: 智能双栏布局系统

根据用户行为自动调整布局比例，减少手动操作。

### 布局状态

| 状态 | 视频区 | 侧边栏 | 触发条件 |
|------|--------|--------|----------|
| 播放中 | 85% | 15% (迷你模式) | 视频播放 |
| 已暂停 | 60% | 40% (完整模式) | 视频暂停 |
| 交互中 | 60% | 40% (高亮模式) | 点击字幕/单词 |

### 迷你模式侧边栏
```
┌──────────────┐
│ 00:15 当前句 │  ← 仅显示当前 + 前后各1句
│ 00:18 下一句 │
│ 00:21 再下句 │
└──────────────┘
```

### 状态转换规则
- 播放 → 暂停：侧边栏平滑展开至40%
- 暂停 → 播放：侧边栏收缩至15%
- 交互后闲置3秒：自动恢复到当前播放状态对应的布局

---

## Part 2: 暂停触发学习面板

视频暂停时，在视频区底部浮现学习工具面板。

### 面板布局
```
┌─────────────────────────────────────────────┐
│                   视频画面                   │
│                                             │
│  ┌─────────────────────────────────────┐    │
│  │ ✨ AI解释  🔤 逐词  📚 生词  🔔 待复习 3 │    │
│  └─────────────────────────────────────┘    │
└─────────────────────────────────────────────┘
```

### 按钮功能

| 按钮 | 功能 | 内容来源 |
|------|------|----------|
| ✨ AI解释 | 解释当前暂停位置的句子 | 调用 AI Tutor API |
| 🔤 逐词翻译 | 显示当前句的逐词对照翻译 | 调用翻译 API |
| 📚 生词 N | 展开本视频收藏的单词列表 | 本地数据库 |
| 🔔 待复习 N | 进入快速复习模式 | SRS 算法筛选 |

### 视觉设计
- 半透明背景 + backdrop-filter blur
- 视频播放时自动隐藏
- 出现/消失使用 fade + slide-up 动画

---

## Part 3: 内嵌式单词查询

点击单词后原地展开卡片，消除 Tab 切换。

### 卡片布局
```
┌─────────────────────────────────────┐
│ 00:15  The weather is beautiful     │
│        today in California.         │
│                                     │
│        ┌── beautiful ──────────┐    │
│        │ /ˈbjuːtɪfl/     🔊   │    │
│        │ 美丽的，漂亮的         │    │
│        │                       │    │
│        │ [+ 收藏]  [✨ 详解]   │    │
│        └───────────────────────┘    │
│                                     │
│ 00:18  I love spending time...      │
└─────────────────────────────────────┘
```

### 交互规则

| 操作 | 行为 |
|------|------|
| 单击单词 | 原地弹出迷你卡片（发音+释义+收藏） |
| 点击 [+ 收藏] | 直接加入词汇本，按钮变为 ✓ 已收藏 |
| 点击 [✨ 详解] | 展开详细面板（词源、例句、AI讲解） |
| 点击卡片外部 | 收起卡片 |
| ESC 键 | 收起卡片 |

### 设计优势
- 保持视线在字幕区域，不中断阅读
- 一键收藏，无需确认弹窗
- 深度学习需求才展开详细面板

---

## Part 4: 快速复习流

利用视频暂停的碎片时间完成 SRS 复习。

### 复习浮层布局
```
┌─ 快速复习 ──────────────────────────────┐
│                                        │
│            beautiful                   │
│           /ˈbjuːtɪfl/                  │
│                                        │
│         [ 点击显示释义 ]                │
│                                        │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐          │
│  │忘了│ │困难│ │记得│ │简单│          │
│  └────┘ └────┘ └────┘ └────┘          │
│                                        │
│            1/3  ━━━○━━━                │
│                           [ ✕ 稍后 ]   │
└────────────────────────────────────────┘
```

### 交互规则

| 场景 | 行为 |
|------|------|
| 视频暂停 + 有待复习词 | 🔔 按钮显示红点徽章 |
| 点击 🔔 待复习 | 浮层出现，视频保持暂停 |
| 选择难度 | 更新 SRS 数据，显示下一词 |
| 全部完成 | 显示 "🎉 复习完成！" 后自动关闭 |
| 点击 ✕ 稍后 | 关闭浮层，视频可继续播放 |
| 闲置超时 | 5分钟无操作自动关闭浮层 |

### 设计优势
- 不强制，用户可随时跳过
- 进度条给予完成感
- 复习数据实时同步到 Notebook

---

## Part 5: 视频生词列表

建立单词与视频场景的记忆关联。

### 生词列表布局
```
┌─ 本视频生词 ───────────────────────────┐
│                                        │
│  beautiful    美丽的        00:15  ▶   │
│  weather      天气          00:15  ▶   │
│  California   加利福尼亚     00:15  ▶   │
│  spending     花费(时间)     00:18  ▶   │
│  outdoor      户外的         00:23  ▶   │
│                                        │
│              共 5 个生词                │
└────────────────────────────────────────┘
```

### 交互规则

| 操作 | 行为 |
|------|------|
| 点击 📚 生词 | 展开本视频收藏的所有单词 |
| 点击单词行 | 展开详细释义卡片 |
| 点击 ▶ 时间戳 | 跳转到该单词出现的时间点 |
| 收藏新单词时 | 📚 徽章数字 +1，列表实时更新 |
| 视频切换时 | 列表自动更新为新视频的生词 |

### 设计优势
- 建立"单词-视频场景"的记忆关联
- 一键跳转回顾原始语境
- 量化学习成果（"这个视频学了N个词"）

---

## Part 6: 空状态与引导体验

渐进式引导，降低新用户认知负担。

### 视频库空状态
```
┌─────────────────────────────────────────────┐
│                                             │
│              🎬                             │
│                                             │
│         开始你的语言学习之旅                  │
│                                             │
│    粘贴 YouTube 链接，或拖拽本地视频文件       │
│                                             │
│    ┌─────────────────────────────────┐      │
│    │  粘贴视频链接...                 │ 导入 │
│    └─────────────────────────────────┘      │
│                                             │
│         ─────── 或 ───────                  │
│                                             │
│       [ 📁 选择本地文件 ]                    │
│                                             │
│    支持: YouTube, MP4, MKV, WebM            │
│                                             │
└─────────────────────────────────────────────┘
```

### 引导序列（仅首次触发）

| 触发时机 | 提示内容 |
|---------|---------|
| 首次暂停视频 | "点击单词可查看释义" |
| 首次收藏单词 | "已加入词汇本，可在学习面板复习" |
| 首次有待复习词 | "有 N 个单词待复习，点击 🔔 开始" |
| 完成首次复习 | "太棒了！坚持复习是记忆的关键" |

### 提示气泡样式
```
┌─ 提示气泡 ────────────────────┐
│ 💡 点击任意单词可查看释义      │
│    试试点击字幕中的单词吧！    │
│                    [ 知道了 ] │
└───────────────────────────────┘
```

### 设计优势
- 渐进式引导，不一次性轰炸
- 提示可通过设置永久关闭
- 空状态突出核心操作

---

## 实现优先级

| 优先级 | 模块 | 复杂度 | 依赖 |
|--------|------|--------|------|
| P0 | Part 3: 内嵌式单词查询 | 中 | 修改 WordPopover |
| P0 | Part 2: 学习面板 | 中 | 新增组件 |
| P1 | Part 1: 智能双栏布局 | 高 | 修改 App.tsx 布局逻辑 |
| P1 | Part 4: 快速复习流 | 中 | 复用 NotebookView 逻辑 |
| P2 | Part 5: 视频生词列表 | 低 | API 已支持 |
| P2 | Part 6: 空状态引导 | 低 | 新增组件 |

---

## 技术要点

### 状态管理
- 新增 `layoutMode: 'playing' | 'paused' | 'interacting'` 状态
- 新增 `showLearningPanel: boolean` 状态
- 新增 `currentVideoWords: VocabWord[]` 状态

### 组件拆分
- `LearningPanel.tsx` - 学习面板（4个功能按钮）
- `QuickReview.tsx` - 快速复习浮层
- `VideoWordList.tsx` - 视频生词列表
- `OnboardingTip.tsx` - 引导提示气泡

### 动画
- 布局切换：CSS transition (width, flex)
- 面板出现：fade + translateY
- 卡片展开：scale + opacity
